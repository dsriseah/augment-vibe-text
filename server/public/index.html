<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Canvas - Node-Based Text Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="toolbar">
        <div class="toolbar-left">
            <h1>📝 Document Canvas</h1>
            <span class="subtitle">Node-based text editing</span>
        </div>
        <div class="toolbar-center">
            <div class="search-container">
                <input type="text" id="hashSearch" placeholder="Search by hash..." />
                <button id="searchBtn" class="btn btn-icon">🔍</button>
            </div>
        </div>
        <div class="toolbar-right">
            <button id="refreshBtn" class="btn btn-primary">🔄 Refresh</button>
            <button id="autoLayoutBtn" class="btn btn-secondary">🎯 Auto Layout</button>
            <button id="addNodeBtn" class="btn btn-success">➕ Add Node</button>
            <button id="saveLayoutBtn" class="btn btn-primary">💾 Save Layout</button>
        </div>
    </div>

    <div class="canvas-container">
        <div class="canvas" id="canvas">
            <div class="loading-overlay" id="loadingOverlay">
                <div class="loading-spinner"></div>
                <p>Loading document nodes...</p>
            </div>
        </div>

        <!-- Connection lines SVG overlay -->
        <svg class="connections-layer" id="connectionsLayer">
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7"
                        refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                </marker>
            </defs>
        </svg>
    </div>

    <!-- Node template -->
    <template id="nodeTemplate">
        <div class="text-node" data-node-id="">
            <div class="node-header">
                <div class="node-title">
                    <span class="node-filename"></span>
                    <span class="node-badge"></span>
                </div>
                <div class="node-controls">
                    <button class="node-btn edit-btn" title="Edit">✏️</button>
                    <button class="node-btn link-btn" title="Create Link">🔗</button>
                    <button class="node-btn close-btn" title="Close">✕</button>
                </div>
            </div>
            <div class="node-content">
                <textarea class="node-text" readonly></textarea>
            </div>
            <div class="node-footer">
                <div class="node-meta">
                    <span class="node-hash"></span>
                    <span class="node-size"></span>
                </div>
                <div class="connection-points">
                    <div class="connection-point input" title="Input connection"></div>
                    <div class="connection-point output" title="Output connection"></div>
                </div>
            </div>
        </div>
    </template>

    <script src="app.js"></script>
</body>
</html>
